create database STO_DBHANZ;
USE STO_DBHANZ;

CREATE TABLE [CATEGORY]
(
	ID INT PRIMARY KEY,
	[NAME] NVARCHAR(MAX)
);
CREATE TABLE CLIENT(
ID INT IDENTITY PRIMARY KEY NOT NULL,
FIO NVARCHAR(MAX) NOT NULL,
PHONE NVARCHAR(50) NOT NULL,
ADRESS NVARCHAR(50) NOT NULL,
[STATUS] NVARCHAR(50) NOT NULL
);
CREATE TABLE CAR(
ID INT IDENTITY PRIMARY KEY NOT NULL,
[CARNAME] NVARCHAR(50) NOT NULL,
[CARTYPE] NVARCHAR(50) NOT NULL,
);
CREATE TABLE PRODUCT(
ID INT IDENTITY PRIMARY KEY NOT NULL,
[NAME] NVARCHAR(MAX) NOT NULL,
[DESCRIPTION] NVARCHAR(MAX) NULL,
[PRICE] DECIMAL(16,2) NULL,
CategoryID INT NULL,
CarID INT NULL,
FOREIGN KEY(CategoryID) REFERENCES [dbo].[CATEGORY] (ID),
FOREIGN KEY(CarID) REFERENCES [dbo].[Car] (ID),
);
CREATE TABLE [ORDER](
ID INT IDENTITY PRIMARY KEY NOT NULL,
QUANTITY INT NOT NULL, 
IdProduct INT NOT NULL,
FOREIGN KEY(IDProduct) REFERENCES PRODUCT(ID)
);
Create table GOODS(
ID INT IDENTITY PRIMARY KEY NOT NULL,
);
create table CART(
ID int identity primary key
);
create table [SERVICES](
ID int identity primary key,
ProductId int not null,
foreign key(ProductId) references [Product](Id)
);
CREATE TABLE MASTERS(
ID INT IDENTITY PRIMARY KEY NOT NULL,
[NAME] NVARCHAR(MAX) NOT NULL
);
CREATE TABLE CART_ORDER(
IDOrder INT UNIQUE NOT NULL,
IDCart INT NOT NULL,
FOREIGN KEY(IDOrder) REFERENCES [ORDER](ID),
FOREIGN KEY(IDCart) REFERENCES CART(ID)
);
CREATE TABLE CLIENT_CART(
IDClient INT NOT NULL,
IDCart INT UNIQUE NOT NULL,
FOREIGN KEY(IDClient) REFERENCES [CLIENT](ID),
FOREIGN KEY(IDCart) REFERENCES CART(ID)
);
CREATE TABLE MASTERS_SERVICES(
IDMaster INT NOT NULL,
IDService INT NOT NULL,
FOREIGN KEY(IDMaster) REFERENCES MASTERS(ID),
FOREIGN KEY(IDService) REFERENCES [SERVICES](ID)
);
CREATE TABLE PRODUCT_GOODS(
IDGoods INT NOT NULL,
IDProduct INT NOT NULL,
FOREIGN KEY(IDGoods) REFERENCES PRODUCT(ID),
FOREIGN KEY(IDGoods) REFERENCES [GOODS](ID)
);